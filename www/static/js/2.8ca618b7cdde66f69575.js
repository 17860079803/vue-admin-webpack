webpackJsonp([2],{"8qtq":function(t,e){},"W+p8":function(t,e){},cFc7:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("3cXf"),i=r.n(n),a=r("4YfN"),s=r.n(a),o=r("ZeN4"),l=r("BGi1"),c=r("fUgm"),u={props:["info"],computed:s()({},Object(c.c)({list:"spec/list"})),data:function(){return{attrArr:[{value:""}],width:"100px",form:{specsname:"",attrs:"",status:1},rules:{specsname:[{required:!0,message:"请输入规格名称",trigger:"blur"}],attrs:[{required:!0,message:"规格不能为空",trigger:"blur"}]}}},methods:s()({},Object(c.b)({reqList:"spec/reqListAction",reqTotal:"spec/reqListNum"}),{addAttr:function(){this.attrArr.push({value:""})},del:function(t){this.attrArr.splice(t,1)},cancel:function(){this.$emit("hide")},close:function(){this.info.isAdd||this.empty()},add:function(){var t=this;this.form.specsname?this.attrArr.some(function(t){return""===t.value})?Object(l.b)("规格属性均不能为空"):(this.form.attrs=i()(this.attrArr.map(function(t){return t.value})),Object(o.f)(this.form).then(function(e){200===e.data.code?(Object(l.a)(e.data.msg),t.$emit("hide"),t.empty(),t.reqList(),t.reqTotal()):Object(l.b)(e.data.msg)})):Object(l.b)("请输入规格名")},empty:function(){this.form={specsname:"",attrs:"",status:1},this.attrArr=[{value:""}]},look:function(t){var e=this;Object(o.R)({id:t}).then(function(t){e.form=t.data.list[0],e.attrArr=JSON.parse(e.form.attrs).map(function(t){return{value:t}})})},update:function(){var t=this;this.form.specsname?this.attrArr.some(function(t){return""===t.value})?Object(l.b)("规格属性均不能为空"):(this.form.attrs=i()(this.attrArr.map(function(t){return t.value})),Object(o.U)(this.form).then(function(e){200==e.data.code?(Object(l.a)("更新成功"),t.$emit("hide"),t.empty(),t.reqList()):Object(l.b)(e.data.msg)})):Object(l.b)("请输入规格名")}}),mounted:function(){},beforeDestroy:function(){}},d={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-dialog",{attrs:{title:t.info.title,visible:t.info.isShow},on:{"update:visible":function(e){return t.$set(t.info,"isShow",e)},closed:t.close}},[r("el-form",{attrs:{model:t.form,rules:t.rules}},[r("el-form-item",{attrs:{label:"规格名称","label-width":t.width,prop:"specsname"}},[r("el-input",{attrs:{placeholder:"请输入规格名称"},model:{value:t.form.specsname,callback:function(e){t.$set(t.form,"specsname",e)},expression:"form.specsname"}})],1),t._v(" "),t._l(t.attrArr,function(e,n){return r("el-form-item",{key:n,attrs:{label:"规格属性","label-width":t.width}},[r("el-row",[r("el-col",{attrs:{span:18}},[r("el-input",{attrs:{placeholder:"请选择规格属性"},model:{value:e.value,callback:function(r){t.$set(e,"value",r)},expression:"item.value"}})],1),t._v(" "),r("el-col",{attrs:{span:4}},[0==n?r("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:t.addAttr}},[t._v("新增规格属性")]):r("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"danger"},on:{click:function(e){return t.del(n)}}},[t._v("删除")])],1)],1)],1)}),t._v(" "),r("el-form-item",{attrs:{label:"状态","label-width":t.width}},[r("el-switch",{attrs:{"active-value":1,"inactive-value":2},model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1)],2),t._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],on:{click:t.cancel}},[t._v("取 消")]),t._v(" "),t.info.isAdd?r("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:t.add}},[t._v("添 加")]):r("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:t.update}},[t._v("修 改")])],1)],1)],1)},staticRenderFns:[]};var f=r("C7Lr")(u,d,!1,function(t){r("wT7u")},"data-v-a2818602",null).exports,p={computed:s()({},Object(c.c)({list:"spec/list",size:"spec/size",total:"spec/total",page:"spec/page"})),data:function(){return{}},components:{},methods:s()({},Object(c.b)({reqList:"spec/reqListAction",reqtotal:"spec/reqListNum",changePageAction:"spec/changePageAction"}),{edit:function(t){this.$emit("emit",t)},del:function(t){var e=this;Object(o.Q)({id:t}).then(function(t){200==t.data.code?(Object(l.a)("删除成功"),e.reqtotal(),e.changePageAction(1)):Object(l.b)(t.data.msg)})},changeCurrentPage:function(t){this.changePageAction(t)}}),mounted:function(){this.reqList(),this.reqtotal(),console.log(this.size)},beforeDestroy:function(){}},m={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-table",{staticStyle:{width:"90%",margin:"10px auto","margin-bottom":"20px"},attrs:{data:t.list,"row-key":"id",border:"","default-expand-all":"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[r("el-table-column",{attrs:{prop:"id",label:"规格编号",sortable:""}}),t._v(" "),r("el-table-column",{attrs:{prop:"specsname",label:"规格名称",sortable:""}}),t._v(" "),r("el-table-column",{attrs:{prop:"",label:"规格属性",width:"350"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.attrs,function(e){return r("el-tag",{key:e,attrs:{type:"success"}},[t._v(t._s(e))])})}}])}),t._v(" "),r("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?r("el-button",{attrs:{type:"primary"}},[t._v("启用")]):r("el-button",{attrs:{type:"info"}},[t._v("禁用")])]}}])}),t._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"primary"},on:{click:function(r){return t.edit(e.row.id)}}},[t._v("编辑")]),t._v(" "),r("v-del",{on:{confirm:function(r){return t.del(e.row.id)}}})]}}])})],1),t._v(" "),r("el-pagination",{attrs:{"page-size":t.size,layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":t.changeCurrentPage}})],1)},staticRenderFns:[]};var v={data:function(){return{info:{isShow:!1,title:"添加规格",isAdd:!0}}},components:{vAdd:f,vList:r("C7Lr")(p,m,!1,function(t){r("8qtq")},null,null).exports},methods:{hide:function(){this.info.isShow=!1},wallAdd:function(){this.info={isShow:!0,title:"添加规格",isAdd:!0}},emit:function(t){this.info={isShow:!0,title:"修改规格",isAdd:!1},this.$refs.add.look(t)}},mounted:function(){},beforeDestroy:function(){}},h={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-button",{directives:[{name:"preventReClick",rawName:"v-preventReClick"}],attrs:{type:"primary"},on:{click:t.wallAdd}},[t._v("添加")]),t._v(" "),r("v-add",{ref:"add",attrs:{info:t.info},on:{hide:t.hide}}),t._v(" "),r("v-list",{on:{emit:function(e){return t.emit(e)}}})],1)},staticRenderFns:[]};var b=r("C7Lr")(v,h,!1,function(t){r("W+p8")},null,null);e.default=b.exports},wT7u:function(t,e){}});
//# sourceMappingURL=2.8ca618b7cdde66f69575.js.map